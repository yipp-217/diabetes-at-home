<body class="clinician_body">
    <header class="clinician_header">
        <h2 class="cilnician_nav">Good afternoon, {{user.nameScreen}}</h2>
        <a href="/" class="clinician_nav_btn"><h5 class="phone_clinician">Log Out</h5></a>
        <a class="icons icon_settings" href="/clinician/settings"><img src="/res/Icon_settings.svg"></a>
    </header>

    <section class="search_bar">
        <input type="text" placeholder="Name.." name="search">
        <button class="reaserch_btn" type="submit"><img src="/res/Icons_reaserch.svg"></button> 
        <a href="/clinician/patient-comments" style="margin-right: 10%; margin-left:auto;"><button button class="lightmedium_button"><h5>comments</h5></button></a>
    </section>

    <main class="dashboard_flex">
        <article class="dash_left">
            <table class="dashboard_table">
                <tr class="title_box">
                    <th>Patient Name</th>
                    <th>Blood glucose (nmol/L)</th>
                    <th>Weight (kg)</th>
                    <th>Exercise (steps)</th>
                    <th>Doses of insulin taken</th>
                </tr>
                
                {{#each patients}}       
                    <tr class="dash_container" onclick="goToPatient()" style="cursor: pointer;">
                        <td>{{this.user.nameGiven}} {{this.user.nameFamily}}</td>
                        {{> clinician_dashboard_patient_data value=this.patientHealthEntries.valueBloodGlucoseLevel lowerThreshold=this.bloodGlucoseLowerThreshold upperThreshold=this.bloodGlucoseUpperThreshold}}
                        {{> clinician_dashboard_patient_data value=this.patientHealthEntries.valueWeight lowerThreshold=this.weightLowerThreshold upperThreshold=this.weighteUpperThreshold}}
                        {{> clinician_dashboard_patient_data value=this.patientHealthEntries.valueExercise lowerThreshold=this.exerciseLowerThreshold upperThreshold=this.exerciseUpperThreshold}}
                        {{> clinician_dashboard_patient_data value=this.patientHealthEntries.valueDosesOfInsulinTaken lowerThreshold=this.dosesOfInsulinLowerThreshold upperThreshold=this.dosesOfInsulinUpperThreshold}}                        
                    </tr>
                {{/each}}
            </table> 
        </article>
    </main>
</body>

<script>
    function goToPatient() {
        location.href = "/clinician/patient"
    }

    const getPatient = async (user) => {
        return await Patient.findById(user).lean()
    }
</script>
